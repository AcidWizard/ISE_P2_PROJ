\hypertarget{sec_design_secArch}{}\doxysection{Architecture subsystems view}\label{sec_design_secArch}
A CVM device has several {\itshape subsystems} (software API of hardware)\+:
\begin{DoxyItemize}
\item Finite State Machine
\begin{DoxyItemize}
\item state\+\_\+t \mbox{\hyperlink{fsm_8c_a78f08da2cba1026a6339467b0da41bf4}{FSM\+\_\+\+Event\+Handler(const state\+\_\+t state, const event\+\_\+t event)}};
\item void \mbox{\hyperlink{fsm_8c_a810caaa83c83118a51bdbd1d87fa0417}{FSM\+\_\+\+Flush\+Enexpected\+Events(const bool flush)}};
\item void \mbox{\hyperlink{fsm_8c_a910a3f2f41867bd01f06de491b027cb6}{FSM\+\_\+\+Add\+State(const state\+\_\+t state, const state\+\_\+funcs\+\_\+t $\ast$funcs)}};
\item void \mbox{\hyperlink{fsm_8c_a15adcfc70c666f5c8956da799c8a4d87}{FSM\+\_\+\+Add\+Transition(const transition\+\_\+t $\ast$transition)}};
\item void \mbox{\hyperlink{fsm_8c_a7232dd041375d6585b39999c2b807fd4}{FSM\+\_\+\+Add\+Event(const event\+\_\+t event)}};
\item event\+\_\+t \mbox{\hyperlink{fsm_8c_a585470759896acd5c68f02ee7dbbebb2}{FSM\+\_\+\+Get\+Event(void)}};
\item event\+\_\+t \mbox{\hyperlink{fsm_8c_aff0eca293353b2ac3d3d2659b0435e94}{FSM\+\_\+\+Wait\+For\+Event(void)}};
\item event\+\_\+t \mbox{\hyperlink{fsm_8c_ac48e5304604c92cdae2219ee9acd72dc}{FSM\+\_\+\+Peek\+For\+Event(void)}};
\item bool \mbox{\hyperlink{fsm_8c_a0ec9f3c0e0d78ca8070e50de321f13cb}{FSM\+\_\+\+No\+Events(void)}};
\item uint8\+\_\+t \mbox{\hyperlink{fsm_8c_a779ec4b8b7471abd702be7b350adb7a9}{FSM\+\_\+\+Nof\+Events(void)}};
\end{DoxyItemize}
\item Display
\begin{DoxyItemize}
\item void \mbox{\hyperlink{display_8c_a19ffdfbb88b7984ac489cbf8445a34dc}{DSPinitialise(void)}};
\item void \mbox{\hyperlink{display_8c_ae1ebaffe2e4dd794cc5b80d20dd5c8fb}{DSPclear(void)}};
\item void \mbox{\hyperlink{display_8c_a98047d060c242396d1bb682126ee780d}{DSPclear\+Line(int row)}};
\item void \mbox{\hyperlink{display_8c_a693db29fcd97c6145cc6742e1bb23d69}{DSPshow\+Display(void)}};
\item void DSPshow(const char text\mbox{[}$\,$\mbox{]}, int row);
\item void DSPshow\+Delete(const char text\mbox{[}$\,$\mbox{]}, int row);
\item void DSPdebug\+System\+Info(const char text\mbox{[}$\,$\mbox{]});
\item void DSPsimulation\+System\+Info(const char text\mbox{[}$\,$\mbox{]});
\item void DSPshow\+System\+Error(const char text\mbox{[}$\,$\mbox{]});
\end{DoxyItemize}
\item Keyboard
\begin{DoxyItemize}
\item void \mbox{\hyperlink{keyboard_8c_af43404a599f52e449ff203f6998d75f2}{KYBinitialise(void)}};
\item void \mbox{\hyperlink{keyboard_8c_a751036558cf089782c54d6bd7ad5f3e3}{KYBclear(void)}};
\item char \mbox{\hyperlink{keyboard_8c_aa647ccf1ed00a48c23266cdd917aa027}{KYBgetchar(void)}};
\item int \mbox{\hyperlink{keyboard_8c_affd8fad935e8e8403a1f1d357dfb54c7}{KYBgetint(int if\+Wrong\+Value)}};
\item double \mbox{\hyperlink{keyboard_8c_a54a066b03c8c3cefc007d7387d7a3422}{KYBgetdouble(double if\+Wrong\+Value)}};
\end{DoxyItemize}
\item TUI {\itshape Textual User Interface} (terminal user interface), uses the Display and Keyboard API
\begin{DoxyItemize}
\item void TUIinitialise(void);
\item int TUIsimulation\+System\+Input\+YN(const char question\+Text\mbox{[}$\,$\mbox{]});
\item char TUIsimulation\+System\+Input\+Char(const char text\mbox{[}$\,$\mbox{]}, const char chrs\mbox{[}$\,$\mbox{]});
\item int TUIsimulation\+System\+Input\+Integer(const char text\mbox{[}$\,$\mbox{]}, int min, int max);
\end{DoxyItemize}
\item FSM Initialisation and exit code
\begin{DoxyItemize}
\item void \mbox{\hyperlink{main_8c_ac5b07d2a0ac85284c29099eee06f0803}{S\+\_\+\+Init\+\_\+on\+Entry(void)}};
\item void S\+\_\+\+Exit\+\_\+on\+Entry(void);
\end{DoxyItemize}
\item FSM state machine for controlling the Simple example, is executed by \mbox{\hyperlink{main_8c_a840291bc02cba5474a4cb46a9b9566fe}{main()}}
\begin{DoxyItemize}
\item void \mbox{\hyperlink{fsm_8c_a7232dd041375d6585b39999c2b807fd4}{FSM\+\_\+\+Add\+Event(const event\+\_\+t event)}};
\item event\+\_\+t \mbox{\hyperlink{fsm_8c_a585470759896acd5c68f02ee7dbbebb2}{FSM\+\_\+\+Get\+Event(void)}};
\item event\+\_\+t \mbox{\hyperlink{fsm_8c_aff0eca293353b2ac3d3d2659b0435e94}{FSM\+\_\+\+Wait\+For\+Event(void)}};
\end{DoxyItemize}
\end{DoxyItemize}

The arrows are code dependency relations (uses relations). In C code these are the \#include dependencies.\hypertarget{sec_design_secArchitecture}{}\doxysection{Architecture view}\label{sec_design_secArchitecture}
\hypertarget{sec_design_secState}{}\doxysection{State machine view}\label{sec_design_secState}
\begin{DoxyVerb}event [condition] / action() 
\end{DoxyVerb}



\begin{DoxyItemize}
\item if an event occurs and the condition is satisfied, then the action will be executed and the state transition will occur.
\item event names are in uppercase, prefixed by {\bfseries{E\+\_\+}}.
\item the action is the name of one or more (short) C functions without parameters or only the important ones, prefixed by the abbreviated name of the related subsystem.
\item all the names in the diagrams should be used in the C code.
\end{DoxyItemize}



A state chart is not a flowdiagram! 